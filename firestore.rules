rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // 기본적으로 모든 읽기 및 쓰기 거부
    match /{document=**} {
      allow read, write: if false;
    }

    // 사용자는 자신의 프로필 문서만 읽고 쓸 수 있습니다.
    match /users/{userId} {
      allow read, update, delete: if request.auth.uid == userId;
      allow create: if request.auth.uid != null;
    }

    // 사용자는 자신의 가계부 항목만 관리할 수 있습니다.
    match /entries/{userId}/{entryId} {
        allow read, write: if request.auth.uid == userId;
    }

    // 사용자는 자신의 정원 상태만 관리할 수 있습니다.
    match /gardens/{userId} {
        allow read, write: if request.auth.uid == userId;
    }
  }
}
